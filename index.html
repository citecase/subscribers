<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CiteCase.in | Multi-Channel Dispatcher</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
    </style>
</head>
<body class="bg-slate-100 min-h-screen flex items-center justify-center p-4">

    <div class="max-w-2xl w-full glass rounded-3xl shadow-2xl overflow-hidden border border-slate-200">
        <!-- Header -->
        <div class="bg-indigo-950 p-6 text-white flex items-center justify-between">
            <div>
                <h1 class="text-xl font-bold tracking-tight">CiteCase.in</h1>
                <p class="text-indigo-300 text-sm">Standard Message Dispatcher</p>
            </div>
            <div class="flex gap-2">
                <div class="bg-green-500/20 p-2 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-400" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884 0 2.225.569 3.945 1.694 5.493l-.957 3.497 3.652-.959zm11.488-8.035c-.301-.15-1.783-.88-2.056-.979-.273-.099-.471-.148-.67.15-.197.297-.767.979-.94 1.174-.173.196-.347.218-.648.068-.302-.15-1.272-.469-2.423-1.494-.894-.797-1.498-1.782-1.673-2.081-.175-.3-.018-.462.13-.61.135-.133.301-.35.452-.524.151-.174.201-.298.302-.497.101-.198.05-.371-.026-.521-.075-.15-.67-1.611-.918-2.21-.242-.584-.487-.504-.67-.514-.174-.01-.372-.012-.57-.012-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.783-.73 2.03-1.435.248-.704.248-1.31.173-1.435-.074-.124-.272-.198-.57-.347z"/></svg>
                </div>
                <div class="bg-blue-500/20 p-2 rounded-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                </div>
            </div>
        </div>

        <div class="p-6 md:p-8 space-y-6">
            <!-- Smart Paste Section -->
            <div class="space-y-2">
                <label class="text-xs font-bold text-slate-500 uppercase tracking-widest">Quick Paste (Paste data here)</label>
                <div class="relative">
                    <textarea id="smartPaste" placeholder="Paste: Lalit Chikte 8989888888 iamaditya02@gmail.com" 
                           class="w-full px-4 py-3 rounded-xl border-2 border-dashed border-slate-300 focus:border-indigo-500 transition outline-none bg-slate-50 text-sm h-16 resize-none"></textarea>
                </div>
            </div>

            <!-- Individual Fields -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="space-y-1">
                    <label class="text-xs font-semibold text-slate-600">WhatsApp Number</label>
                    <input type="text" id="recipientPhone" placeholder="Mobile number..." class="w-full px-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none text-sm">
                </div>
                <div class="space-y-1">
                    <label class="text-xs font-semibold text-slate-600">Email Address</label>
                    <input type="email" id="recipientEmail" placeholder="Email address..." class="w-full px-3 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-indigo-500 outline-none text-sm">
                </div>
            </div>

            <!-- Preview Section -->
            <div class="space-y-2">
                <div class="flex items-center justify-between">
                    <label class="text-xs font-bold text-slate-500 uppercase tracking-widest">Message Preview</label>
                    <button onclick="handleCopy()" class="text-indigo-600 text-xs font-semibold hover:underline">Copy Message</button>
                </div>
                <div id="previewBox" class="w-full p-5 bg-indigo-50/50 rounded-2xl border border-indigo-100 text-slate-800 text-sm leading-relaxed whitespace-pre-line min-h-[140px]">
                    <!-- Content injected here -->
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 pt-2">
                <button onclick="handleWhatsApp()" class="flex items-center justify-center gap-3 bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-2xl transition-all shadow-lg shadow-green-100 group">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884 0 2.225.569 3.945 1.694 5.493l-.957 3.497 3.652-.959zm11.488-8.035c-.301-.15-1.783-.88-2.056-.979-.273-.099-.471-.148-.67.15-.197.297-.767.979-.94 1.174-.173.196-.347.218-.648.068-.302-.15-1.272-.469-2.423-1.494-.894-.797-1.498-1.782-1.673-2.081-.175-.3-.018-.462.13-.61.135-.133.301-.35.452-.524.151-.174.201-.298.302-.497.101-.198.05-.371-.026-.521-.075-.15-.67-1.611-.918-2.21-.242-.584-.487-.504-.67-.514-.174-.01-.372-.012-.57-.012-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.783-.73 2.03-1.435.248-.704.248-1.31.173-1.435-.074-.124-.272-.198-.57-.347z"/></svg>
                    WhatsApp
                </button>
                <button onclick="handleSendEmail()" class="flex items-center justify-center gap-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 rounded-2xl transition-all shadow-lg shadow-indigo-100 group">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg>
                    Email
                </button>
            </div>

            <!-- Notification Area -->
            <div id="notification" class="hidden fixed bottom-8 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-6 py-3 rounded-full shadow-2xl text-sm font-medium z-50">
                Action completed!
            </div>
        </div>
        
        <div class="bg-slate-50 border-t border-slate-200 p-4 text-center">
            <p class="text-xs text-slate-400">CiteCase.in Dispatcher</p>
        </div>
    </div>

    <script>
        const smartPaste = document.getElementById('smartPaste');
        const phoneInput = document.getElementById('recipientPhone');
        const emailInput = document.getElementById('recipientEmail');
        const previewBox = document.getElementById('previewBox');
        const notification = document.getElementById('notification');

        smartPaste.addEventListener('input', (e) => {
            const val = e.target.value.trim();
            if (!val) return;
            const emailMatch = val.match(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/);
            const phoneMatch = val.match(/\d{10,}/);
            if (phoneMatch) phoneInput.value = phoneMatch[0];
            if (emailMatch) emailInput.value = emailMatch[0];
            updatePreview();
        });

        function generateContent() {
            return `Hello,

We are from CiteCase.in !

We are sending you this email because it is seen that you have registered at our website.

Can we proceed to complete subscription process?`;
        }

        function updatePreview() {
            previewBox.textContent = generateContent();
        }

        function showNotification(msg) {
            notification.textContent = msg;
            notification.classList.remove('hidden');
            setTimeout(() => notification.classList.add('hidden'), 3000);
        }

        function handleWhatsApp() {
            let phone = phoneInput.value.trim();
            if (!phone) {
                showNotification("Enter a phone number.");
                phoneInput.focus();
                return;
            }
            phone = phone.replace(/\D/g, '');
            if (phone.length === 10) phone = '91' + phone;
            const text = encodeURIComponent(generateContent());
            window.open(`https://wa.me/${phone}?text=${text}`, '_blank');
        }

        function handleSendEmail() {
            const email = emailInput.value.trim();
            if (!email) {
                showNotification("Enter an email address.");
                emailInput.focus();
                return;
            }

            const subject = "CiteCase.in | Registration Update";
            const body = generateContent();
            const mailtoUrl = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            
            // More robust trigger for mailto in various environments
            const link = document.createElement('a');
            link.href = mailtoUrl;
            link.style.display = 'none';
            document.body.appendChild(link);
            link.click();
            
            // Short delay before removing to ensure trigger works
            setTimeout(() => {
                document.body.removeChild(link);
            }, 100);

            showNotification("Opening Email Client...");
        }

        function handleCopy() {
            const text = generateContent();
            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            showNotification("Copied to clipboard!");
        }

        [phoneInput, emailInput].forEach(el => el.addEventListener('input', updatePreview));
        updatePreview();
    </script>
</body>
</html>
